swagger: '2.0'
info:
  version: "1.0"
  title: Uvch.cz API
  description: |
    Full description of current API version supported on uvch.cz and other related websites
# host: www.e-croatia.com
# basePath: /api/v1
produces:
  - application/json
securityDefinitions:
  Basic:
    type: basic
tags:
  - name: Client
    description: Everything related to client
  - name: Location
    description: All calls which are dealing with the location (region, city etc)
paths:
  /clients:
    get:
      summary: Retrieve the list of clients
      description: |
        Returns list of active clients. For each one of them system provides basic information which should be enough to show client's main profile card.
        The result can be affected by using optional parameters.
        System does not return all valid results, but supports pagination.
      security:
        - Basic: []
      tags:
        - Client
      responses:
        200:
          description: Successful response
          schema:
            type: array
            items:
              pagination:
                type: array
                items: 
                  $ref: '#/definitions/Pagination'
              clients:
                type: array
                items:
                  $ref: '#/definitions/Client'
        401:
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error'
        403:
          description: Forbidden
          schema:
            $ref: '#/definitions/Error'
        500:
          description: Runtime error
          schema:
            $ref: '#/definitions/Error'
  /regions:
    get:
      summary: Retrieve the list of regions
      description: |
        Returns list of current supported regions with basic information 
        about each one of them.
      security:
        - Basic: []
      tags:
        - Location
      responses:
        200:
          description: Successful response
          schema:
            type: array
            items:
              $ref: '#/definitions/Region'
        401:
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error'
        403:
          description: Forbidden
          schema:
            $ref: '#/definitions/Error'
        500:
          description: Runtime error
          schema:
            $ref: '#/definitions/Error'
  /regions/{region_id}:
    get:
      summary: Retrieve information about the region
      description: |
        Returns more information about the region itself. Also provides useful links where to go from here.
      security:
        - Basic: []
      tags:
        - Location
      parameters:
        - name: region_id
          in: path
          description: ID of the region
          type: integer
          format: int32
          required: true
      responses:
        200:
          description: Successful response
          schema:
            $ref: '#/definitions/Region'
        401:
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error'
        403:
          description: Forbidden
          schema:
            $ref: '#/definitions/Error'
        500:
          description: Runtime error
          schema:
            $ref: '#/definitions/Error'
  /regions/{region_id}/cities:
    get:
      summary: Retrieve the list of cities within the region
      description: |
        Returns list of cities within selected region. Each city contain basic information about itself and list of links to retrieve more inforamtation about each one.
      security:
        - Basic: []
      tags:
        - Location
      parameters:
        - name: region_id
          in: path
          description: ID of the region
          type: integer
          format: int32
          required: true
      responses:
        200:
          description: Successful response
          schema:
            type: array
            items:
              $ref: '#/definitions/City'
        401:
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error'
        403:
          description: Forbidden
          schema:
            $ref: '#/definitions/Error'
        500:
          description: Runtime error
          schema:
            $ref: '#/definitions/Error'
  /regions/{region_id}/cities/{city_id}:
    get:
      summary: Retrieve information about the city
      description: |
        Returns more detailed information about the city. 
        The requirements are that the city belongs to the region.
      security:
        - Basic: []
      tags:
        - Location
      parameters:
        - name: region_id
          in: path
          description: ID of the region
          type: integer
          format: int32
          required: true
        - name: city_id
          in: path
          description: ID of the city
          type: integer
          format: int32
          required: true
      responses:
        200:
          description: Successful response
          schema:
            $ref: '#/definitions/CityProfile'
        401:
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error'
        403:
          description: Forbidden
          schema:
            $ref: '#/definitions/Error'
        500:
          description: Runtime error
          schema:
            $ref: '#/definitions/Error'          
definitions:
  City:
    type: object
    properties:
      id: 
        type: integer
        format: int32
      code: 
        type: string
      name:
        type: string
      links:
        type: array
        items:
          $ref: '#/definitions/HateoasLink' 
  CityProfile:
    type: object
    properties:
      id: 
        type: integer
        format: int32
      code: 
        type: string
      name:
        type: string
      forecast:
        $ref: '#/definitions/Forecast'
      links:
        type: array
        items:
          $ref: '#/definitions/HateoasLink' 
  Client:
    type: object
    properties:
      id:
        type: integer
        format: int32
      name:
        type: string
      city:
        type: string
      region:
        type: string
      sea:
        type: integer
        format: int32
      center:
        type: integer
        format: int32
      links:
        type: array
        items:
          $ref: '#/definitions/HateoasLink' 
  Forecast:
    type: object
    properties:
      update:
        type: dateTime
      sunrise:
        type: dateTime
      sunset:
        type: dateTime
      temperature:
        type: integer
        format: int32
      temperature_unit:
        type: string
      temperature_code:
        type: string
      temperature_name:
        type: string
      wind_direction:
        type: float
      wind_direction_code:
        type: string
      wind_speed:
        type: float
      wind_speed_name:
        type: string
      pressure:
        type: float
      pressure_unit:
        type: string
  HateoasLink:
    type: object
    properties:
      href:
        type: string
  Pagination:
    type: object
    properties:
      total:
        type: integer
        format: int32
      per_page:
        type: integer
        format: int32
      pages:
        type: integer
        format: int32
      page:
        type: integer
        format: int32
      is_first:
        type: integer
        format: int32
      is_last:
        type: integer
        format: int32
      has_next:
        type: integer
        format: int32
      has_previous:
        type: integer
        format: int32
      page_start:
        type: integer
        format: int32
      page_end:
        type: integer
        format: int32
  Region:
    type: object
    properties:
      id: 
        type: integer
        format: int32
      code: 
        type: string
      name:
        type: string
      links:
        type: array
        items:
          $ref: '#/definitions/HateoasLink'
  Error:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
# Added by API Auto Mocking Plugin
host: virtserver.swaggerhub.com
basePath: /pavlatka/Uvch.cz/1.0
schemes:
 - https